webpackJsonp([4],{Kqcg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),s={props:{offset:{type:Number,default:40},enableInfinite:{type:Boolean,default:!0},enableRefresh:{type:Boolean,default:!0},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1}},data:function(){return{top:0,state:0,startY:0,touching:!1,infiniteLoading:!1}},methods:{touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startScroll=this.$el.scrollTop||0,this.touching=!0},touchMove:function(t){if(this.enableRefresh&&!(this.$el.scrollTop>0)&&this.touching){var e=t.targetTouches[0].pageY-this.startY-this.startScroll;e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)}},touchEnd:function(t){if(this.enableRefresh){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0)}},refresh:function(){this.state=2,this.top=this.offset,this.onRefresh(this.refreshDone)},refreshDone:function(){this.state=0,this.top=0},infinite:function(){this.infiniteLoading=!0,this.onInfinite(this.infiniteDone)},infiniteDone:function(){this.infiniteLoading=!1},onScroll:function(t){if(this.enableInfinite&&!this.infiniteLoading){var e=this.$el.clientHeight;this.$el.querySelector(".inner").clientHeight-e-this.$el.scrollTop-(this.onRefresh?this.$el.querySelector(".pull-refresh").clientHeight:0)<this.$el.querySelector(".load-more").clientHeight&&this.infinite()}}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"yo-scroll",class:{down:0===t.state,up:1==t.state,refresh:2===t.state,touch:t.touching},on:{touchstart:function(e){t.touchStart(e)},touchmove:function(e){t.touchMove(e)},touchend:function(e){t.touchEnd(e)},scroll:function(e){(t.onInfinite||t.infiniteLoading)&&t.onScroll(e)}}},[n("section",{staticClass:"inner",style:{transform:"translate3d(0, "+t.top+"px, 0)"}},[n("header",{staticClass:"pull-refresh"},[t._t("pull-refresh",[n("span",{staticClass:"down-tip"},[t._v("下拉更新")]),t._v(" "),n("span",{staticClass:"up-tip"},[t._v("松开更新")]),t._v(" "),n("span",{staticClass:"refresh-tip"},[t._v("更新中")])])],2),t._v(" "),t._t("default"),t._v(" "),n("footer",{staticClass:"load-more"},[t._t("load-more",[n("span",[t._v("加载中……")])])],2)],2)])},staticRenderFns:[]};var a={name:"App",data:function(){return{counter:1,num:20,pageStart:0,pageEnd:0,listdata:[],downdata:[]}},components:{DScroll:n("VU/8")(s,o,!1,function(t){n("v7PX")},null,null).exports},mounted:function(){this.getList()},methods:{getList:function(){var t=this;$.ajax({url:"https://api.github.com/repos/typecho-fans/plugins/contents/",type:"get",dataType:"json",success:function(e){if(e.length<t.num)return t.$el.querySelector(".load-more").style.display="none",void(t.listdata=e);t.listdata=e.slice(0,t.num)}})},onRefresh:function(t){this.getList(),t()},onInfinite:function(t){var e=this;$.ajax({url:"https://api.github.com/repos/typecho-fans/plugins/contents/",type:"get",dataType:"json",success:function(n){e.counter++,e.pageEnd=e.num*e.counter,e.pageStart=e.pageEnd-e.num;for(var i=n,s=e.pageStart,o=e.pageEnd;s<o;s++){var a={};if(a.name=i[s].name,e.downdata.push(a),s+1>=n.length)return void(e.$el.querySelector(".load-more").style.display="none")}t()}})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("d-scroll",{attrs:{"on-refresh":t.onRefresh,"on-infinite":t.onInfinite}},[n("ul",[t._l(t.listdata,function(e,i){return n("li",[t._v(t._s(e.name))])}),t._v(" "),t._l(t.downdata,function(e,i){return n("li",[t._v(t._s(e.name))])})],2)])],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(t){n("byEe")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:l},template:"<App/>"})},byEe:function(t,e){},v7PX:function(t,e){}},["Kqcg"]);
//# sourceMappingURL=scroll.6012b72fdbe0c85f1ffd.js.map