{"version":3,"sources":["webpack:///src/pages/upload/App.vue","webpack:///./src/pages/upload/App.vue?f092","webpack:///./src/pages/upload/App.vue","webpack:///./src/pages/upload/upload.js"],"names":["App","data","headerImage","picValue","cropper","croppable","panel","url","imgCropperData","accept","mounted","self","this","image","document","getElementById","cropper_esm","aspectRatio","viewMode","background","zoomable","ready","methods","cancel","obj","outerHTML","getObjectURL","file","undefined","window","createObjectURL","URL","webkitURL","change","e","files","target","dataTransfer","length","type","size","indexOf","alert","replace","commit","croppedCanvas","roundedCanvas","getCroppedCanvas","getRoundedCanvas","toDataURL","postImg","sourceCanvas","canvas","createElement","context","getContext","width","height","imageSmoothingEnabled","drawImage","globalCompositeOperation","beginPath","arc","Math","min","PI","fill","upload_App","render","_vm","_h","$createElement","_c","_self","attrs","id","directives","name","rawName","value","expression","staticClass","src","alt","_v","on","click","staticStyle","padding","style","margin-top","text-align","opacity","for","staticRenderFns","pages_upload_App","__webpack_require__","normalizeComponent","ssrContext","vue_esm","config","productionTip","el","components","template"],"mappings":"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","file":"static/js/upload.ce869dd0845361d26a80.js","sourcesContent":["<template>\n    <div id=\"demo\">\n        <!-- 遮罩层 -->\n        <div class=\"container\" v-show=\"panel\">\n            <div>\n                <img id=\"image\" :src=\"url\" alt=\"Picture\">\n            </div>\n            <button type=\"button\" id=\"button\" @click=\"commit\">确定</button>\n            <button type=\"button\"id=\"cancel\" @click=\"cancel\">取消</button>\n        </div>\n\n        <div style=\"padding:20px;\">\n            <div class=\"show\">\n                <div class=\"picture\" :style=\"'backgroundImage:url('+headerImage+')'\">\n                </div>\n            </div>\n            <div style=\"margin-top:20px;text-align: left;\">\n                <input type=\"file\" id=\"change\" accept=\"image\" @change=\"change\" style=\"opacity: 0\">\n                <label for=\"change\" class=\"changeBtn\">选择图片</label>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n\n<script>\n    import Cropper from \"cropperjs\";\n    export default {\n        data() {\n            return {\n                headerImage: \"\",\n                picValue: \"\",\n                cropper: \"\",\n                croppable: false,\n                panel: false,\n                url: \"\",\n                imgCropperData: {\n                    accept: \"image/gif, image/jpeg, image/png, image/jpg\"\n                }\n            };\n        },\n        mounted() {\n            //初始化这个裁剪框\n            var self = this;\n            var image = document.getElementById(\"image\");\n            this.cropper = new Cropper(image, {\n                aspectRatio: 1,\n                viewMode: 1,\n                background: false,\n                zoomable: false,\n                ready: function() {\n                    self.croppable = true;\n                }\n            });\n        },\n        methods: {\n            //取消上传\n            cancel() {\n                this.panel = false;\n                var obj = document.getElementById('change') ;\n                obj.outerHTML=obj.outerHTML;\n            },\n            //创建url路径\n            getObjectURL(file) {\n                var url = null;\n                if (window.createObjectURL != undefined) {\n                    // basic\n                    url = window.createObjectURL(file);\n                } else if (window.URL != undefined) {\n                    // mozilla(firefox)\n                    url = window.URL.createObjectURL(file);\n                } else if (window.webkitURL != undefined) {\n                    // webkit or chrome\n                    url = window.webkitURL.createObjectURL(file);\n                }\n                return url;\n            },\n            //input框change事件，获取到上传的文件\n            change(e) {\n                let files = e.target.files || e.dataTransfer.files;\n                if (!files.length) return;\n                let type = files[0].type; //文件的类型，判断是否是图片\n                let size = files[0].size; //文件的大小，判断图片的大小\n                if (this.imgCropperData.accept.indexOf(type) == -1) {\n                    alert(\"请选择我们支持的图片格式！\");\n                    return false;\n                }\n                if (size > 5242880) {\n                    alert(\"请选择5M以内的图片！\");\n                    return false;\n                }\n                this.picValue = files[0];\n                this.url = this.getObjectURL(this.picValue);\n                //每次替换图片要重新得到新的url\n                if (this.cropper) {\n                    this.cropper.replace(this.url);\n                }\n                this.panel = true;\n            },\n            //确定提交\n            commit() {\n                this.panel = false;\n                var croppedCanvas;\n                var roundedCanvas;\n                if (!this.croppable) {\n                    return;\n                }\n                // Crop\n                croppedCanvas = this.cropper.getCroppedCanvas();\n                // Round\n                roundedCanvas = this.getRoundedCanvas(croppedCanvas);\n                this.headerImage = roundedCanvas.toDataURL();\n                //上传图片\n                this.postImg();\n            },\n            //canvas画图\n            getRoundedCanvas(sourceCanvas) {\n                var canvas = document.createElement(\"canvas\");\n                var context = canvas.getContext(\"2d\");\n                var width = sourceCanvas.width;\n                var height = sourceCanvas.height;\n                canvas.width = width;\n                canvas.height = height;\n                context.imageSmoothingEnabled = true;\n                context.drawImage(sourceCanvas, 0, 0, width, height);\n                context.globalCompositeOperation = \"destination-in\";\n                context.beginPath();\n                context.arc(\n                    width / 2,\n                    height / 2,\n                    Math.min(width, height) / 2,\n                    0,\n                    2 * Math.PI,\n                    true\n                );\n                context.fill();\n                return canvas;\n            },\n            //提交上传函数\n            postImg() {\n                alert(\"上传成功\");\n                //这边写图片的上传\n            }\n        }\n    };\n</script>\n\n<style>\n    #demo #button,#demo #cancel {\n        position: absolute;\n        right: 10px;\n        top: 10px;\n        width: 80px;\n        height: 40px;\n        border: none;\n        border-radius: 5px;\n        background: white;\n    }\n    #demo #cancel{left:10px;}\n    #demo .show {\n        width: 100px;\n        height: 100px;\n        overflow: hidden;\n        position: relative;\n        border-radius: 50%;\n        border: 1px solid #d5d5d5;\n    }\n    #demo .picture {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-position: center center;\n        background-repeat: no-repeat;\n        background-size: cover;\n    }\n    #demo .container {\n        z-index: 99;\n        position: fixed;\n        padding-top: 60px;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 1);\n    }\n    #demo #image {\n        max-width: 100%;\n    }\n    .cropper-view-box,\n    .cropper-face {\n        border-radius: 50%;\n    }\n    /*!\n     * Cropper.js v1.0.0-rc\n     * https://github.com/fengyuanchen/cropperjs\n     *\n     * Copyright (c) 2017 Fengyuan Chen\n     * Released under the MIT license\n     *\n     * Date: 2017-03-25T12:02:21.062Z\n     */\n    .cropper-container {\n        font-size: 0;\n        line-height: 0;\n        position: relative;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        direction: ltr;\n        -ms-touch-action: none;\n        touch-action: none;\n    }\n    .cropper-container img {\n        display: block;\n        min-width: 0 !important;\n        max-width: none !important;\n        min-height: 0 !important;\n        max-height: none !important;\n        width: 100%;\n        height: 100%;\n        image-orientation: 0deg;\n    }\n    .cropper-wrap-box,\n    .cropper-canvas,\n    .cropper-drag-box,\n    .cropper-crop-box,\n    .cropper-modal {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n    }\n    .cropper-wrap-box {\n        overflow: hidden;\n    }\n    .cropper-drag-box {\n        opacity: 0;\n        background-color: #fff;\n    }\n    .cropper-modal {\n        opacity: 0.5;\n        background-color: #000;\n    }\n    .cropper-view-box {\n        display: block;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        outline: 1px solid #39f;\n        outline-color: rgba(51, 153, 255, 0.75);\n    }\n    .cropper-dashed {\n        position: absolute;\n        display: block;\n        opacity: 0.5;\n        border: 0 dashed #eee;\n    }\n    .cropper-dashed.dashed-h {\n        top: 33.33333%;\n        left: 0;\n        width: 100%;\n        height: 33.33333%;\n        border-top-width: 1px;\n        border-bottom-width: 1px;\n    }\n    .cropper-dashed.dashed-v {\n        top: 0;\n        left: 33.33333%;\n        width: 33.33333%;\n        height: 100%;\n        border-right-width: 1px;\n        border-left-width: 1px;\n    }\n    .cropper-center {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        display: block;\n        width: 0;\n        height: 0;\n        opacity: 0.75;\n    }\n    .cropper-center:before,\n    .cropper-center:after {\n        position: absolute;\n        display: block;\n        content: \" \";\n        background-color: #eee;\n    }\n    .cropper-center:before {\n        top: 0;\n        left: -3px;\n        width: 7px;\n        height: 1px;\n    }\n    .cropper-center:after {\n        top: -3px;\n        left: 0;\n        width: 1px;\n        height: 7px;\n    }\n    .cropper-face,\n    .cropper-line,\n    .cropper-point {\n        position: absolute;\n        display: block;\n        width: 100%;\n        height: 100%;\n        opacity: 0.1;\n    }\n    .cropper-face {\n        top: 0;\n        left: 0;\n        background-color: #fff;\n    }\n    .cropper-line {\n        background-color: #39f;\n    }\n    .cropper-line.line-e {\n        top: 0;\n        right: -3px;\n        width: 5px;\n        cursor: e-resize;\n    }\n    .cropper-line.line-n {\n        top: -3px;\n        left: 0;\n        height: 5px;\n        cursor: n-resize;\n    }\n    .cropper-line.line-w {\n        top: 0;\n        left: -3px;\n        width: 5px;\n        cursor: w-resize;\n    }\n    .cropper-line.line-s {\n        bottom: -3px;\n        left: 0;\n        height: 5px;\n        cursor: s-resize;\n    }\n    .cropper-point {\n        width: 5px;\n        height: 5px;\n        opacity: 0.75;\n        background-color: #39f;\n    }\n    .cropper-point.point-e {\n        top: 50%;\n        right: -3px;\n        margin-top: -3px;\n        cursor: e-resize;\n    }\n    .cropper-point.point-n {\n        top: -3px;\n        left: 50%;\n        margin-left: -3px;\n        cursor: n-resize;\n    }\n    .cropper-point.point-w {\n        top: 50%;\n        left: -3px;\n        margin-top: -3px;\n        cursor: w-resize;\n    }\n    .cropper-point.point-s {\n        bottom: -3px;\n        left: 50%;\n        margin-left: -3px;\n        cursor: s-resize;\n    }\n    .cropper-point.point-ne {\n        top: -3px;\n        right: -3px;\n        cursor: ne-resize;\n    }\n    .cropper-point.point-nw {\n        top: -3px;\n        left: -3px;\n        cursor: nw-resize;\n    }\n    .cropper-point.point-sw {\n        bottom: -3px;\n        left: -3px;\n        cursor: sw-resize;\n    }\n    .cropper-point.point-se {\n        right: -3px;\n        bottom: -3px;\n        width: 20px;\n        height: 20px;\n        cursor: se-resize;\n        opacity: 1;\n    }\n    @media (min-width: 768px) {\n        .cropper-point.point-se {\n            width: 15px;\n            height: 15px;\n        }\n    }\n    @media (min-width: 992px) {\n        .cropper-point.point-se {\n            width: 10px;\n            height: 10px;\n        }\n    }\n    @media (min-width: 1200px) {\n        .cropper-point.point-se {\n            width: 5px;\n            height: 5px;\n            opacity: 0.75;\n        }\n    }\n    .cropper-point.point-se:before {\n        position: absolute;\n        right: -50%;\n        bottom: -50%;\n        display: block;\n        width: 200%;\n        height: 200%;\n        content: \" \";\n        opacity: 0;\n        background-color: #39f;\n    }\n    .cropper-invisible {\n        opacity: 0;\n    }\n    .cropper-bg {\n        background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\");\n    }\n    .cropper-hide {\n        position: absolute;\n        display: block;\n        width: 0;\n        height: 0;\n    }\n    .cropper-hidden {\n        display: none !important;\n    }\n    .cropper-move {\n        cursor: move;\n    }\n    .cropper-crop {\n        cursor: crosshair;\n    }\n    .cropper-disabled .cropper-drag-box,\n    .cropper-disabled .cropper-face,\n    .cropper-disabled .cropper-line,\n    .cropper-disabled .cropper-point {\n        cursor: not-allowed;\n    }\n    .changeBtn {\n        position: absolute;\n        left: 34px;\n        border: 1px solid #ccc;\n        padding: 4px 10px;\n        border-radius: 4px;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/upload/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"demo\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.panel),expression:\"panel\"}],staticClass:\"container\"},[_c('div',[_c('img',{attrs:{\"id\":\"image\",\"src\":_vm.url,\"alt\":\"Picture\"}})]),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\",\"id\":\"button\"},on:{\"click\":_vm.commit}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\",\"id\":\"cancel\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])]),_vm._v(\" \"),_c('div',{staticStyle:{\"padding\":\"20px\"}},[_c('div',{staticClass:\"show\"},[_c('div',{staticClass:\"picture\",style:('backgroundImage:url('+_vm.headerImage+')')})]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\",\"text-align\":\"left\"}},[_c('input',{staticStyle:{\"opacity\":\"0\"},attrs:{\"type\":\"file\",\"id\":\"change\",\"accept\":\"image\"},on:{\"change\":_vm.change}}),_vm._v(\" \"),_c('label',{staticClass:\"changeBtn\",attrs:{\"for\":\"change\"}},[_vm._v(\"选择图片\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-864d033e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/upload/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-864d033e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-864d033e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/upload/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n// import router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  // router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/upload/upload.js"],"sourceRoot":""}