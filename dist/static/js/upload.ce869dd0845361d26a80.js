webpackJsonp([5],{gAKQ:function(e,t){},lGIl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n=a("5SB6"),r={data:function(){return{headerImage:"",picValue:"",cropper:"",croppable:!1,panel:!1,url:"",imgCropperData:{accept:"image/gif, image/jpeg, image/png, image/jpg"}}},mounted:function(){var e=this,t=document.getElementById("image");this.cropper=new n.a(t,{aspectRatio:1,viewMode:1,background:!1,zoomable:!1,ready:function(){e.croppable=!0}})},methods:{cancel:function(){this.panel=!1;var e=document.getElementById("change");e.outerHTML=e.outerHTML},getObjectURL:function(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},change:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){var a=t[0].type,i=t[0].size;if(-1==this.imgCropperData.accept.indexOf(a))return alert("请选择我们支持的图片格式！"),!1;if(i>5242880)return alert("请选择5M以内的图片！"),!1;this.picValue=t[0],this.url=this.getObjectURL(this.picValue),this.cropper&&this.cropper.replace(this.url),this.panel=!0}},commit:function(){var e,t;this.panel=!1,this.croppable&&(e=this.cropper.getCroppedCanvas(),t=this.getRoundedCanvas(e),this.headerImage=t.toDataURL(),this.postImg())},getRoundedCanvas:function(e){var t=document.createElement("canvas"),a=t.getContext("2d"),i=e.width,n=e.height;return t.width=i,t.height=n,a.imageSmoothingEnabled=!0,a.drawImage(e,0,0,i,n),a.globalCompositeOperation="destination-in",a.beginPath(),a.arc(i/2,n/2,Math.min(i,n)/2,0,2*Math.PI,!0),a.fill(),t},postImg:function(){alert("上传成功")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"demo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.panel,expression:"panel"}],staticClass:"container"},[a("div",[a("img",{attrs:{id:"image",src:e.url,alt:"Picture"}})]),e._v(" "),a("button",{attrs:{type:"button",id:"button"},on:{click:e.commit}},[e._v("确定")]),e._v(" "),a("button",{attrs:{type:"button",id:"cancel"},on:{click:e.cancel}},[e._v("取消")])]),e._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("div",{staticClass:"show"},[a("div",{staticClass:"picture",style:"backgroundImage:url("+e.headerImage+")"})]),e._v(" "),a("div",{staticStyle:{"margin-top":"20px","text-align":"left"}},[a("input",{staticStyle:{opacity:"0"},attrs:{type:"file",id:"change",accept:"image"},on:{change:e.change}}),e._v(" "),a("label",{staticClass:"changeBtn",attrs:{for:"change"}},[e._v("选择图片")])])])])},staticRenderFns:[]};var o=a("VU/8")(r,c,!1,function(e){a("gAKQ")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:o},template:"<App/>"})}},["lGIl"]);
//# sourceMappingURL=upload.ce869dd0845361d26a80.js.map